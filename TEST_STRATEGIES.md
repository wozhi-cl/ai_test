# 测试策略功能说明

## 概述

自动化测试工具现在支持多种测试策略，能够生成包含各种测试观点的测试用例数据，包括边界值测试、等价类测试、异常测试等。

## 支持的测试策略

### 1. 基本测试 (Basic)
- **描述**: 生成基本的操作步骤，每个节点生成一个测试步骤
- **适用场景**: 快速验证基本功能
- **步骤数量**: 与节点数量相同
- **示例**: 点击按钮、填写输入框、选择下拉选项

### 2. 边界值测试 (Boundary)
- **描述**: 针对输入框和选择器生成边界值测试用例
- **测试内容**:
  - **文本输入框**: 空字符串、单字符、50字符、100字符、255字符、256字符、中文字符、混合字符、空格字符、特殊字符
  - **邮箱输入框**: 空邮箱、最短邮箱、标准邮箱、长用户名邮箱、长域名邮箱、无效格式邮箱
  - **数字输入框**: 最小值-1、最小值、最小值+1、最大值-1、最大值、最大值+1、零值、负值、非数字输入
  - **密码输入框**: 空密码、单字符密码、8字符密码、16字符密码、32字符密码、33字符密码、标准密码、中文密码
  - **下拉框**: 第一个选项、最后一个选项、中间选项

### 3. 等价类测试 (Equivalence)
- **描述**: 根据输入类型生成等价类测试用例
- **测试内容**:
  - **文本输入框**: 正常文本、数字文本、英文文本、中文文本、混合文本、包含特殊字符文本、前后空格文本
  - **邮箱输入框**: 标准邮箱格式、包含点号邮箱、包含加号邮箱、子域名邮箱、多级域名邮箱
  - **数字输入框**: 正整数、零值、负整数、小数
  - **下拉框**: 每个选项的测试

### 4. 异常测试 (Negative)
- **描述**: 生成异常和安全性测试用例
- **测试内容**:
  - **文本输入框**: 超长文本、XSS攻击、SQL注入、路径遍历、二进制数据、Unicode控制字符
  - **邮箱输入框**: XSS邮箱、SQL注入邮箱、换行符注入、无效格式
  - **数字输入框**: 超大数字、超大负数、超长小数、非数字输入、XSS攻击、SQL注入
  - **下拉框**: 无效选项、XSS选项、SQL注入选项

### 5. 综合测试 (Comprehensive)
- **描述**: 组合所有测试策略，生成最全面的测试用例
- **测试内容**: 包含边界值测试、等价类测试和异常测试的所有内容
- **步骤数量**: 最多，覆盖最全面

## 使用方法

### 1. 通过UI界面使用

#### 快速生成测试
1. 点击主页的"生成测试"按钮
2. 选择页面结构
3. 输入测试用例名称
4. **选择测试策略** (新增功能)
5. 点击生成

#### 从页面结构生成
1. 在页面结构列表中点击"生成测试"按钮
2. 输入测试用例名称
3. **选择测试策略** (新增功能)
4. 点击生成

### 2. 通过代码使用

```python
from core.test_generator import TestGenerator
from models.test_case import TestType, TestPriority

# 创建测试生成器
test_generator = TestGenerator()

# 生成边界值测试用例
test_case = test_generator.generate_test_case_from_nodes(
    structure_id=structure_id,
    node_ids=node_ids,
    test_name="边界值测试用例",
    test_type=TestType.FUNCTIONAL,
    priority=TestPriority.HIGH,
    description="测试输入框的边界值",
    test_strategy="boundary"  # 指定测试策略
)

# 保存测试用例
test_generator.save_test_case(test_case)
```

## 测试策略对比

| 策略 | 步骤数量 | 测试深度 | 执行时间 | 适用场景 |
|------|----------|----------|----------|----------|
| 基本测试 | 少 | 浅 | 快 | 快速验证 |
| 边界值测试 | 中 | 中 | 中 | 输入验证 |
| 等价类测试 | 中 | 中 | 中 | 功能测试 |
| 异常测试 | 多 | 深 | 慢 | 安全性测试 |
| 综合测试 | 最多 | 最深 | 最慢 | 全面测试 |

## 生成的测试数据示例

### 边界值测试示例
```json
{
  "step_number": 1,
  "action": "fill",
  "input_data": "",
  "expected_result": "输入框应该正确处理空字符串测试",
  "description": "边界值测试: 空字符串测试"
}
```

### 异常测试示例
```json
{
  "step_number": 2,
  "action": "fill",
  "input_data": "<script>alert('xss')</script>",
  "expected_result": "输入框应该拒绝XSS攻击测试或给出适当错误提示",
  "description": "异常测试: XSS攻击测试"
}
```

## 技术实现

### 核心类和方法

1. **TestGenerator类**
   - `generate_test_case_from_nodes()`: 主生成方法，支持test_strategy参数
   - `_generate_boundary_test_steps()`: 生成边界值测试步骤
   - `_generate_equivalence_test_steps()`: 生成等价类测试步骤
   - `_generate_negative_test_steps()`: 生成异常测试步骤
   - `_generate_comprehensive_test_steps()`: 生成综合测试步骤

2. **输入类型识别**
   - 根据HTML input的type属性识别输入类型
   - 支持text、email、password、number、tel等类型
   - 针对不同类型生成相应的测试数据

3. **测试数据生成**
   - 边界值数据: 空值、最小值、最大值、边界值等
   - 等价类数据: 正常值、异常值、边界值等
   - 异常数据: XSS攻击、SQL注入、路径遍历等

## 优势

1. **自动化**: 无需手动编写测试数据，自动生成各种测试场景
2. **全面性**: 覆盖边界值、等价类、异常等多种测试策略
3. **可扩展**: 易于添加新的测试策略和测试数据
4. **实用性**: 生成的测试用例可直接用于自动化测试执行
5. **安全性**: 包含安全性测试用例，如XSS、SQL注入等

## 注意事项

1. **执行时间**: 综合测试策略生成的测试用例步骤较多，执行时间较长
2. **数据量**: 异常测试包含大量测试数据，文件较大
3. **适用性**: 不同测试策略适用于不同的测试场景，应根据实际需求选择
4. **维护性**: 生成的测试用例需要根据实际业务逻辑进行调整

## 未来改进

1. **智能识别**: 根据页面结构智能推荐测试策略
2. **自定义策略**: 支持用户自定义测试策略和测试数据
3. **数据驱动**: 支持从外部数据源导入测试数据
4. **报告分析**: 针对不同测试策略生成专门的测试报告
